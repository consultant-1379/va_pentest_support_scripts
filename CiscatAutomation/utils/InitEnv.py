import os
import json
import shutil

def initializeScriptingCiscat():
    home = os.path.expanduser('~')
    # if os.path.exists(os.path.join(home, 'scriptCiscat')):
    #     return
    this_file_path = os.path.dirname(os.path.abspath(__file__))

    print (home)
    os.makedirs(os.path.join(home, 'scriptCiscat'), exist_ok=True)
    os.makedirs(os.path.join(home, 'scriptCiscat', 'resources'), exist_ok=True)
    os.makedirs(os.path.join(home, 'scriptCiscat', 'reports'), exist_ok=True)

    with open(os.path.join(this_file_path, '..', 'resources', 'conf.json')) as f:
        conf = json.load(f)
        for env in conf:
            target = env["target"]
            instance = env["instance"]
            os.makedirs(os.path.join(home, 'scriptCiscat', 'resources', target, instance), exist_ok = True)
            os.makedirs(os.path.join(home, 'scriptCiscat', 'resources', target, instance, 'properties'), exist_ok=True)
            os.makedirs(os.path.join(home, 'scriptCiscat', 'reports', target, instance), exist_ok=True)
            os.makedirs(os.path.join(home, 'scriptCiscat', 'reports', target, instance, 'logs'), exist_ok=True)
            os.makedirs(os.path.join(home, 'scriptCiscat', 'reports', target, instance, 'report'), exist_ok=True)
            if not os.path.exists(os.path.join(home, 'scriptCiscat', 'resources', target, instance, 'credentials.txt')):
                shutil.copy(os.path.join(this_file_path, '..', 'resources', 'credentials.txt'),
                            os.path.join(home, 'scriptCiscat', 'resources', target, instance))
            if not os.path.exists(os.path.join(home, 'scriptCiscat', 'resources', target, instance, 'mapping4manual.txt')):
                shutil.copy(os.path.join(this_file_path, '..', 'resources', 'mapping4manual.txt'),
                            os.path.join(home, 'scriptCiscat', 'resources', target, instance))
    if not os.path.exists(os.path.join(home, 'scriptCiscat','os-benchmark-mapping.json')):
        shutil.copy(os.path.join(this_file_path, '..', 'resources', 'os-benchmark-mapping.json'),
                    os.path.join(home, 'scriptCiscat'))

    if not os.path.exists(os.path.join(home, 'scriptCiscat', 'conf.json')):
        shutil.copy(os.path.join(this_file_path, '..', 'resources', 'conf.json'), os.path.join(home, 'scriptCiscat'))



